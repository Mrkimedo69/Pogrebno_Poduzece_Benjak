<p-toast></p-toast>

<div class="card">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Pregled narudžbi</h2>
    <p-badge [value]="narudzbe().length" severity="info"></p-badge>
  </div>

  <p-table
    [value]="narudzbe()"
    [loading]="loading()"
    [responsiveLayout]="'scroll'"
    [paginator]="true"
    [rows]="10"
    [selectionMode]="'single'"
    (onRowSelect)="idiNaDetalje($event.data.id)"
    emptyMessage="Nema dostupnih narudžbi"
    class="p-datatable-gridlines cursor-pointer"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Korisnik</th>
        <th>Status</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-narudzba>
      <tr [pSelectableRow]="narudzba">
        <td>{{ narudzba.id }}</td>
        <td class="min-w-[200px]">
          <div class="flex flex-column">
            <span class="font-medium">{{ narudzba.fullName }}</span>
            <span class="text-sm text-gray-500">{{ narudzba.email }}</span>
          </div>
        </td>
        <td>
          <p-badge
            [value]="narudzba.status"
            [severity]="getStatusSeverity(narudzba.status)">
          </p-badge>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
