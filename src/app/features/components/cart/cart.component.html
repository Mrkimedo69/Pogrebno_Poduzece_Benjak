<section class="surface-section py-6 px-3">
  <div class="max-w-screen-md mx-auto surface-card p-5 shadow-3 border-round-xl">
    
    <!-- Naslov -->
    <h2 class="text-2xl md:text-3xl font-bold text-primary-800 text-center mb-5">
      Vaša košarica
    </h2>

    <!-- Ako ima stavki -->
    <ng-container *ngIf="isLoaded && itemsWithDetails.length > 0; else emptyCart">
      <div class="flex flex-column gap-4">
        <div *ngFor="let item of itemsWithDetails; let i = index" class="flex gap-3 align-items-center border-bottom pb-3">
          
          <!-- Slika -->
          <div class="w-6rem h-6rem flex-shrink-0">
            <img [src]="item.imageUrl || 'assets/img/placeholder.png'"
                 alt="{{ item.name }}"
                 (error)="item.imageUrl = 'assets/placeholder_artikli.png'"
                 class="border-round shadow-2 w-full h-full object-cover" />
          </div>

          <!-- Detalji -->
          <div class="flex-grow-1">
            <div class="flex justify-content-between align-items-start flex-wrap">
              <h4 class="m-0 text-lg font-semibold text-primary-700">{{ item.name }}</h4>
              <span class="text-xs text-white bg-primary border-round px-2 py-1 mt-1">{{ item.type === 'cvijet' ? 'Cvijet' : 'Artikl' }}</span>
            </div>
            <p class="text-sm text-gray-600 mt-1">{{ item.price | currency:'EUR' }}</p>
          </div>

          <!-- Uklanjanje -->
          <button pButton icon="pi pi-trash" class="p-button-rounded p-button-danger p-button-text" (click)="removeItem(i)"></button>
        </div>
      </div>

      <!-- Ukupno -->
      <div class="flex justify-content-between mt-5 text-lg font-bold text-gray-800">
        <span>Ukupno:</span>
        <span>{{ total | currency:'EUR' }}</span>
      </div>

      <!-- Gumb za plaćanje -->
      <div class="flex justify-content-end mt-4">
        <button pButton label="Plati" icon="pi pi-credit-card" class="p-button-success p-button-lg"></button>
      </div>
    </ng-container>

    <!-- Prazna košarica -->
    <ng-template #emptyCart>
      <div class="text-center py-5">
        <p class="text-gray-500 text-lg mb-4">Vaša košarica je trenutno prazna.</p>
        <button pButton label="Natrag na artikle" icon="pi pi-arrow-left" routerLink="/pogrebni-artikli" class="p-button-outlined"></button>
      </div>
    </ng-template>
  </div>
</section>
